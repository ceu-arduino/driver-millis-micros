// compile with CEU_DEFS=-DCEU_PM_MIN

#include "int0.ceu"
#include "time.ceu"

var u32 ms = _;
var u32 us = _;

{ Serial.begin(9600); }

loop do
    await INT0;
    emit TIME_GET_MILLIS(&ms);
    emit TIME_GET_MICROS(&us);
    {
        Serial.print("MS ");
        Serial.println(@ms);
        Serial.print("US ");
        Serial.println(@us);
    }
    emit TIME_DELAY_MICROS(30000);
    emit TIME_DELAY_MICROS(30000);
end
